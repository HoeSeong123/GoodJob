<html layout:decorate="~{layout/layout.html}">
<head>
    <title>멘토링 작성</title>

    <style>

        .image-upload > input
        {
            display: none;
        }
    </style>

    <!--toastui-->
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
</head>
<body>

<main layout:fragment="main" class="container mx-auto">
    <div class="container mx-auto py-8 w-1/3">
        <h1 class="text-2xl font-bold">멘토링 작성</h1>

        <form class="mt-4" th:object="${mentoringRequestDto}" method="post">
            <div class="mb-4">
                <p>제목(필수)</p>
                <input type="text" name="title" th:field="*{title}" class="form-input w-full border border-neutral rounded-md h-10 p-3" placeholder="제목을 입력하세요">
            </div>
            <div class="mb-4">
                <p>직무(필수)</p>
                <select th:field="*{job}" class="select select-bordered w-full max-w-xs" id="job" name="job">
                    <option value="백엔드 개발자">백엔드 개발자</option>
                    <option value="프론트엔드 개발자">프론트엔드 개발자</option>
                    <option value="풀스택 개발자">풀스택 개발자</option>
                </select>
            </div>
            <div class="mb-4">
                <p>경력(필수)</p>
                <select th:field="*{career}" class="select select-bordered w-full max-w-xs" id="career" name="career">
                    <option value="신입(1년 이하)">신입(1년 이하)</option>
                    <option value="주니어(1~3년)">주니어(1~3년)</option>
                    <option value="미들(4~8년)">미들(4~8년)</option>
                    <option value="시니어(9년 이상)">시니어(9년 이상)</option>
                </select>
            </div>
            <div class="mb-4">
                <p>현직(선택)</p>
                <input type="text" name="currentJob" th:field="*{currentJob}" class="form-input w-full border border-neutral rounded-md h-10 p-3" placeholder="현재 근무 중인 곳을 입력하세요">
            </div>
            <div class="mb-4">
                <p>멘토링 가능 시간(선택)</p>
                <input type="text" name="preferredTime" th:field="*{preferredTime}" class="form-input w-full border border-neutral rounded-md h-10 p-3" placeholder="멘토링이 가능한 시간을 입력하세요">
            </div>
            <div class="mb-4">
                <p>내용(필수)</p>
                <textarea name="content" th:field="*{content}" class="form-textarea hidden" id="hidden-content"></textarea>
                <div class="form-textarea" id="editor"></div>
            </div>

            <button onclick="submitForm()" class="register bg-neutral hover:bg-black text-white font-bold px-4 py-2 rounded border-neutral" >저장하기</button>
        </form>
    </div>
    <script>
        const Editor = toastui.Editor;
        const editor = new Editor({
            el : document.querySelector('#editor'),
            toolbarItems: [
                ['heading', 'bold', 'italic', 'strike'],
                ['hr', 'quote'],
            ],
        });
        // 폼 제출 시 에디터의 내용을 숨겨진 textarea 필드에 할당
        const form = document.querySelector('form');

        function submitForm() {
            const hiddenContent = document.querySelector('#hidden-content');
            hiddenContent.value = editor.getMarkdown();
            const form = document.querySelector('form');
            form.submit();
        }
    </script>
</main>

</body>
</html>